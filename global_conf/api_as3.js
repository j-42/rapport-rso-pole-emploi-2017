"use strict";!function(a){function e(a,e){var r=Array.prototype.slice.call(arguments);return new Promise(function(s,t){var p=NIApi.flashViewer[window.apiActionScriptConfig.actionScriptApiMethod](JSON.stringify({method:a+"."+e,args:r}));"SUCCESS"===p.message?s(p.datas):t(p.message)})}var r="";a.Class.CommonApi.prototype.resolveActionScriptCall=function(e){var s=a.Main.xmlManager.get("common-configuration","config","shift");if(s+=1,"event"===e.method){var t=e.args[0],p=t.visiblePages.map(function(a){return parseInt(a.index,10)+s}),i={1:p[0]};p[1]&&(i[2]=p[1]);var n="event",o="",c={};switch(t.type){case"downloadPdf":o="pdfDownload",c[1]=t.params.value;break;case"url":o="externalLink",c[1]=t.params.param;break;case"videoBegin":case"videoResume":o="videoPlay",c[1]=Math.round(t.params.at);break;case"videoPause":o="videoPause",c[1]=Math.round(t.params.at);break;case"videoEnd":o="videoEnd";break;case"inform":"#panel_sendtofriend_validated#"===t.params.param&&(o="shareMail");break;case"twitterShare":case"facebookShare":case"tumblrShare":case"linkedinShare":case"pinterestShare":o="share",c[1]=t.type.replace("Share","");break;case"print":if(o="print","select"===t.params.param)break;var m=t.params.param.split("-"),l=parseInt(m[0])+s,d=parseInt(m[1])+s;c[1]=a.Utils.getPagesBetween(l,d).join(",");break;case"bookmarksAdd":o="bookmark",c[1]=parseInt(t.params.value,10)+s;break;case"bookmarksRemove":o="unbookmark",c[1]=parseInt(t.params.value,10)+s;break;case"nextPage":o="pageNext",c[1]=p[0];break;case"prevPage":o="pagePrev",c[1]=p[0];break;case"popup":o="lightboxOpen",c[1]=a.Utils.resolveVariable(t.params.param);break;case"pageZoomIn":o="zoomIn",c=p[0];break;case"pageZoomOut":o="zoomOut",c=p[0];break;case"fullscreen":o="fullScreenOn";break;default:n="page"}switch(t.type){case"page":if(NIApi.stat.trackEvent("pageView",{1:parseInt(t.params.value,10)+1}),r===p.join("-"))break;o="page",c=i,r=p.join("-");break;case"setState":"thumbnails"===t.params.param&&(o="thumbnails");break;case"toggleActivate":"panel_search"===t.params.param?o="search":"panel_pdf"===t.params.param?o="pdf":"panel_print"===t.params.param?o="print":"panel_summary"===t.params.param?o="contents":"panel_email"===t.params.param?o="share-email":"panel_share"===t.params.param&&(o="share");break;case"search":o="search",c[1]=t.params.value;break;case"addProduct":o="wishlist-product",c[1]=t.params.param;break;case"whishlist":"cart-display"===t.params.event?o="wishlist-list":"checkout-display"===t.params.event?o="wishlist-checkout":"checkout-submitted"===t.params.event&&(o="wishlist-submitted",n="event")}"fromPage"===t.targetName&&"click"===t.params.event&&(o="link",n="event",c[1]=t.params.type,c[2]=t.params.param),o&&("page"===n?NIApi.stat.trackPage(o,c):"event"===n&&NIApi.stat.trackEvent(o,c))}};var s=window.NIApi.getFunctionList();for(var t in s)for(var p=0;p<s[t].length;p++){var i=s[t][p];NIApi.register("page.getCount",e.bind({},t,i))}}(webpublicationNamespace);